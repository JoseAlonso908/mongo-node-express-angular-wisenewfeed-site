angular.module("er",["ngRoute","ngSanitize","angularMoment","er.controllers","er.services","er.directives","satellizer"]).config(["$locationProvider","$routeProvider","$authProvider",function(e,t,r){e.hashPrefix("!"),t.when("/start",{templateUrl:"assets/views/landing.htm"}).when("/",{templateUrl:"assets/views/home.htm"}).when("/my",{templateUrl:"assets/views/profile.htm"}),r.facebook({clientId:685381251615066})}]).run(["$rootScope","$templateCache",function(e,t){t.removeAll()}]),angular.module("er.controllers",[]).controller("startController",["$scope","$auth","$location",function(e,t,r){e.authenticate=function(e){t.authenticate(e).then(function(e){r.path("/")})["catch"](function(e){alert("Unable to authenticate")})}}]).controller("homeController",["$scope","$timeout","categoriesDropdown","countriesDropdown","dropdowns","identityService","feedService",function(e,t,r,a,i,o,n){e.cats=r,e.countries=a,e.r_tags=["Tag 1","Tag 2","Tag 3","Tag 4","Tag 5"],e.r_people=["Guy 1","Guy 2","Guy 3","Guy 4","Guy 5","Guy 6","Guy 7"],e.r_categories=["Category 1","Category 2","Category 3","Category 4"],o.then(function(t){e.user=t,e.feedLoading=!0,e.feed=[],n.then(function(t){e.feed=t,e.feedLoading=!1,e.$apply()})})}]).controller("profileController",["$scope","identityService","feedService",function(e,t,r){e.wallpaperStyle={},t.then(function(t){e.user=t,e.user.wallpaper&&(e.wallpaperStyle={"background-image":"url("+t.wallpaper+")}"}),e.feedLoading=!0,e.feed=[],r.then(function(t){e.feed=t,e.feedLoading=!1,e.$apply()})})}]),angular.module("er.directives",[]).directive("avatar",function(){return{restrict:"E",templateUrl:"assets/views/directives/avatar.htm",scope:{image:"@",color:"@",number:"@"}}}).directive("post",function(){return{restrict:"E",templateUrl:"assets/views/directives/post.htm",scope:{post:"="},link:function(e,t,r){e.user=e.$parent.user}}}).directive("question",function(){return{restrict:"E",templateUrl:"assets/views/directives/question.htm",scope:{question:"="}}}).directive("familiarexpert",function(){return{restrict:"E",templateUrl:"assets/views/directives/familiar-expert.htm",scope:{user:"="}}}).directive("newquestions",["$timeout",function(e){return{restrict:"E",templateUrl:"assets/views/directives/new-questions.htm",scope:{user:"="},link:function(e,t,r){e.questions=e.user.questions}}}]).directive("familiarexperts",["$timeout","familiarExpertsService",function(e,t){return{restrict:"E",templateUrl:"assets/views/directives/familiar-experts.htm",link:function(e,r,a){e.users=[],e.familiarExpertsLoading=!0,t.then(function(t){e.users=t,e.familiarExpertsLoading=!1,e.$apply()})}}}]).directive("topbar",function(){return{restrict:"E",templateUrl:"assets/views/directives/topbar.htm",scope:{user:"="}}}).directive("filters",["dropdowns",function(e){return{restrict:"E",templateUrl:"assets/views/directives/filters.htm",link:function(t,r,a){e()}}}]).directive("bigratedavatar",function(){return{restrict:"E",templateUrl:"assets/views/directives/big-rated-avatar.htm",scope:{user:"="},link:function(e,t,r){var a=angular.element(t).find("canvas")[0],i=a.getContext("2d"),o=angular.element(t)[0].children[0].offsetWidth,n=angular.element(t)[0].children[0].offsetHeight;angular.element(t).find("canvas").attr("width",o),angular.element(t).find("canvas").attr("height",n);var s=4,c=e.user.xp/100*2+1.5;i.lineWidth=s,i.strokeStyle="#43abe7",i.beginPath(),i.arc(o/2,n/2,o/2-s/2,1.5*Math.PI,c*Math.PI,!1),i.stroke()}}}).directive("autosuggest",function(){return{restrict:"A",templateUrl:"assets/views/directives/autosuggest.htm",scope:{suggestions:"="}}}),angular.module("er.services",[]).factory("identityService",["$timeout","$http",function(e,t){return new Promise(function(e,r){t.get("/me",{header:{authorization:localStorage.satellizer_token}}).then(function(t){var r=t.data;r.rating=r.rating||1,r.color=r.color||"bronze",r.likes=r.likes||0,r.xp=r.xp||0,r.dislikes=r.dislikes||0,r.reactions=r.reactions||0,r.followers=r.followers||0,r.following=r.following||0,e(r)})})}]).factory("feedService",["$timeout","$sce","parseTextService",function(e,t,r){return new Promise(function(a,i){var o=[{id:1,author:{name:"Nicholas Cage",avatar:"https://s.aolcdn.com/hss/storage/midas/627f1d890718ff2c58318a280145a153/203216448/nicholas-cage-con-air.jpg",rating:1,color:"gold",position:"Director",country:"United States"},createdAt:new Date(Date.now()-1e3*Math.round(1e3*Math.random())),text:"@SomeGuy Lorem ipsum dolor sit amet, neglegentur vituperatoribus cum ei. Facete dolorum aliquando duo ne, pro an delenit praesentea perpetua adipisc eos, civibus.",image:"https://s.aolcdn.com/hss/storage/midas/627f1d890718ff2c58318a280145a153/203216448/nicholas-cage-con-air.jpg",ratings:{expert:{likes:12432,dislikes:4230,shares:1320},journalist:{likes:12432,dislikes:4230,shares:1320},visitor:{likes:12432,dislikes:4230,shares:1320}},comments:[{id:2,author:{name:"Nicholas Cage",avatar:"https://s.aolcdn.com/hss/storage/midas/627f1d890718ff2c58318a280145a153/203216448/nicholas-cage-con-air.jpg",rating:2,color:"silver",position:"Director",country:"United States"},createdAt:new Date(Date.now()-1e3*Math.round(1e3*Math.random())),text:"Lorem ipsum dolor sit amet, neglegentur vituperatoribus cum ei. Facete dolorum aliquando! #DieHard",likes:12,dislikes:1}]},{id:2,author:{name:"Nicholas Cage",avatar:"https://s.aolcdn.com/hss/storage/midas/627f1d890718ff2c58318a280145a153/203216448/nicholas-cage-con-air.jpg",rating:1,color:"gold",position:"Director",country:"United States"},createdAt:new Date(Date.now()-1e3*Math.round(1e3*Math.random())),text:"Lorem ipsum dolor sit amet, neglegentur vituperatoribus cum ei. Facete dolorum aliquando duo ne, pro an delenit praesentea perpetua adipisc eos, civibus.",image:"https://s.aolcdn.com/hss/storage/midas/627f1d890718ff2c58318a280145a153/203216448/nicholas-cage-con-air.jpg",ratings:{expert:{likes:12432,dislikes:4230,shares:1320},journalist:{likes:12432,dislikes:4230,shares:1320},visitor:{likes:12432,dislikes:4230,shares:1320}}},{id:3,author:{name:"John Lennon",avatar:"https://s.aolcdn.com/hss/storage/midas/627f1d890718ff2c58318a280145a153/203216448/nicholas-cage-con-air.jpg",rating:1,color:"silver",position:"Singer",country:"United Kingdom"},createdAt:new Date(Date.now()-1e3*Math.round(1e3*Math.random())),text:"Lorem ipsum dolor sit amet, neglegentur vituperatoribus cum ei. Facete dolorum aliquando duo ne, pro an delenit praesentea perpetua adipisc eos, civibus.",ratings:{expert:{likes:12432,dislikes:4230,shares:1320},journalist:{likes:12432,dislikes:4230,shares:1320},visitor:{likes:12432,dislikes:4230,shares:1320}}}];for(var n in o){var s=o[n];if(s.ratings.expert.likes=numeral(s.ratings.expert.likes).format("0a").toUpperCase(),s.ratings.expert.dislikes=numeral(s.ratings.expert.dislikes).format("0a").toUpperCase(),s.ratings.expert.shares=numeral(s.ratings.expert.shares).format("0a").toUpperCase(),s.ratings.journalist.likes=numeral(s.ratings.journalist.likes).format("0a").toUpperCase(),s.ratings.journalist.dislikes=numeral(s.ratings.journalist.dislikes).format("0a").toUpperCase(),s.ratings.journalist.shares=numeral(s.ratings.journalist.shares).format("0a").toUpperCase(),s.ratings.visitor.likes=numeral(s.ratings.visitor.likes).format("0a").toUpperCase(),s.ratings.visitor.dislikes=numeral(s.ratings.visitor.dislikes).format("0a").toUpperCase(),s.ratings.visitor.shares=numeral(s.ratings.visitor.shares).format("0a").toUpperCase(),s.text=t.trustAsHtml(r(s.text)),s.comments)for(var c in s.comments){var l=s.comments[c];l.text=t.trustAsHtml(r(l.text)),s.comments[c]=l}o[n]=s}e(function(){a(o)},500)})}]).factory("familiarExpertsService",["$timeout",function(e){return new Promise(function(t,r){var a=[{id:1,name:"Keanu Reeves",role:"Expert",image:"https://s.aolcdn.com/hss/storage/midas/627f1d890718ff2c58318a280145a153/203216448/nicholas-cage-con-air.jpg",color:"bronze",rating:2,likes_percentage:70},{id:2,name:"Keanu Reeves",role:"Expert",image:"https://s.aolcdn.com/hss/storage/midas/627f1d890718ff2c58318a280145a153/203216448/nicholas-cage-con-air.jpg",color:"bronze",rating:2,likes_percentage:70},{id:3,name:"Keanu Reeves",role:"Expert",image:"https://s.aolcdn.com/hss/storage/midas/627f1d890718ff2c58318a280145a153/203216448/nicholas-cage-con-air.jpg",color:"bronze",rating:2,likes_percentage:70}];e(function(){t(a)},2e3)})}]).factory("dropdowns",function(){return function(){var e=angular.element(document.querySelectorAll(".menu-buttons.dropdown")),t=angular.element(document.querySelectorAll(".dropdown-list")),r=angular.element(document.body);r.on("click",function(){t.removeClass("active")}),e.on("click",function(e){e.stopImmediatePropagation();var t=angular.element(this).attr("dropdown-id");angular.element(document.querySelector('.dropdown-list[dropdown-id="'+t+'"]')).toggleClass("active")})}}).factory("categoriesDropdown",function(){var e=(angular.element(document.querySelector(".menu-buttons.dropdown[dropdown-id=categories]")),angular.element(document.querySelector(".dropdown-list[dropdown-id=categories]")));e.on("click",function(e){e.stopImmediatePropagation()});var t={};t.categories=[{id:1,title:"World News",count:353478392},{id:2,title:"Canada News",count:12478392},{id:3,title:"Buzz News",count:4478392},{id:4,title:"Science",count:2478392},{id:5,title:"Business",count:532952},{id:6,title:"Health",count:422321},{id:7,title:"Technology",count:352210},{id:8,title:"Sport",count:24990},{id:9,title:"Entertainment",count:1224}],t.chosenCategory=t.categories[1],t.activeCategoryClass=function(e){return{active:e.id===t.chosenCategory.id}},t.setActiveCategory=function(r){t.chosenCategory=r,e.removeClass("active")};for(var r in t.categories)t.categories[r].countShort=numeral(t.categories[r].count).format("0a").toUpperCase();return t}).factory("countriesDropdown",function(){var e=(angular.element(document.querySelector(".menu-buttons.dropdown[dropdown-id=countries]")),angular.element(document.querySelector(".dropdown-list[dropdown-id=countries]")));e.on("click",function(e){e.stopImmediatePropagation()});var t={};return t.countries=[{id:1,title:"North America",sub:[{id:2,title:"United States"},{id:3,title:"Canada"},{id:4,title:"Mexico"}]},{id:5,title:"Central & South America",sub:[{id:6,title:"Brazil"},{id:7,title:"Chile"},{id:8,title:"Argentina"}]}],t.chosenCountry=t.countries[0].sub[0],t.activeRegionClass=function(e){var r=!1;for(var a in e.sub)e.sub[a].id===t.chosenCountry.id&&(r=!0);return{active:r}},t.activeCountryClass=function(e){return{active:t.chosenCountry.id===e.id}},t.setActiveCountry=function(r){t.chosenCountry=r,e.removeClass("active")},t}).factory("parseTextService",function(){return function(e,t){return t||(t={tags:[],people:[],cats:[]}),e=e.replace(/#([a-z0-9]+)/gi,'<a href="#!/tag/$1" class="'+t.tags.join(" ")+'">#$1</a>'),e=e.replace(/@([a-z0-9]+)/gi,'<a href="#!/people/$1" class="'+t.people.join(" ")+'">@$1</a>'),e=e.replace(/\$([a-z0-9]+)/gi,'<a href="#!/category/$1" class="'+t.cats.join(" ")+'">$$1</a>')}});
//# sourceMappingURL=app.js.map