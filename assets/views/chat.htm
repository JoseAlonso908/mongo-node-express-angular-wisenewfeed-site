<div id="wrapper"><div id="top-bar-background"><topbar user="user"></topbar></div><div class="content"><div class="middle wide flex"><div class="messages-wrapper"><div class="chats"><div class="search"><a href="javascript:void(0);" class="action"><i class="material-icons">search</i></a> <input type="text" placeholder="Search in conversations" ng-change="filterConversations()" ng-model="search"> <a href="javascript:void(0);" class="action"><i class="material-icons">add</i></a></div><div class="user" ng-class="{unread: u.read === false, active: u.active, visible: u.visible}" ng-click="setActive(u)" ng-repeat="u in chats track by $index"><a ng-href="#!/person/{{u._id}}"><avatar user="u"></avatar></a><div class="date" am-time-ago="u.lastMessageTime">date</div><div class="text"><a ng-href="#!/person/{{u._id}}" class="name">{{u.name}}</a><div class="role">{{u.lastMessage || u.role}}</div></div></div></div><div class="chat"><div class="selected-messages" ng-show="selectedMessages.length > 0"><div class="title"><div class="ttext">{{selectedMessages.length}} message(s) selected</div><button class="small-icon" ng-click="clearSelectedMessages()"><i class="material-icons">close</i></button></div><div class="buttons"><a href="javascript:void(0);">Delete</a> <a href="javascript:void(0);">Report spam</a></div></div><div ng-show="!chatChosen" class="text">Choose chat at the left panel</div><div ng-show="chatChosen && chatMessages.length == 0" class="text">This conversation is empty.</div><div class="messages-box-wrapper"><div class="messages"><a href="javascript:void(0);" ng-show="!hideLoadMore && chatChosen && chatMessages.length > 0" class="load-more" ng-click="loadMore()">Load more</a><div class="message" ng-class="{selected: m.selected}" ng-click="toggleSelectMessage(m)" ng-repeat="m in chatMessages track by $index"><a ng-href="#!/person/{{m.from._id}}"><avatar user="m.from"></avatar></a><div class="date" am-time-ago="m.createdAt"></div><div class="name">{{m.from.name}}</div><div class="mtext">{{m.text}}</div></div></div></div><div class="write-message" ng-if="chatChosen"><avatar user="user"></avatar><textarea placeholder="Write a message..." class="not-empty" ng-model="$parent.text"></textarea><button ng-click="sendMessage()" class="send"><div><i class="material-icons">send</i><div class="title">Send</div></div></button><form><input type="file" name="file" accept="image/*" class="hidden-file-input"></form><button ng-if="files.length < 5" ng-click="addImage()" class="upload-image"><i class="material-icons">camera_alt</i></button><div class="clear"></div><div class="upload-files" ng-show="files.length > 0"><div class="file" ng-repeat="file in files" style="background-image: url({{file.base64}})"><a href="javascript:void(0);" class="remove" ng-click="removeUpload($index)"><i class="material-icons">close</i></a></div><div class="clear"></div></div></div></div></div></div><div class="right" ng-if="feedType != 'people'"><newquestions user="user" ng-show="user && user.active_questions > 0"></newquestions><familiarexperts></familiarexperts><aboutbox></aboutbox></div></div></div>