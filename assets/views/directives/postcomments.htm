<div class="comments" ng-init="showmore=false" ng-class="{moreShown: showmore || nocollapse}" ng-show="comments.length > 0"><a href="javascript:void(0);" ng-click="$parent.showmore=!$parent.showmore" class="show-more" ng-if="comments.length > 3 && !nocollapse">{{($parent.showmore ? 'Show less' : 'Show more')}}</a><div ng-class="{highlighted: comment.highlighted}" ng-hide="comment.removed" class="comment" id="c{{comment._id}}" ng-repeat="comment in comments track by $index"><a name="c{{comment._id}}"></a> <a href="javascript:void(0);" ng-if="user._id == comment.author._id" class="remove" title="Remove comment" ng-click="remove(comment)"><i class="material-icons">close</i></a><avatar class="comment-author-avatar" user="comment.author"></avatar><div class="comment-title"><span ng-if="comment.author.role == 'User'" class="name dark-bold">{{comment.author.name}}</span> <a ng-if="comment.author.role != 'User'" ng-href="#!/person/{{comment.author._id}}" class="name dark-bold">{{comment.author.name}}</a> <span class="time small-light" am-time-ago="comment.createdAt"></span></div><div class="text" ng-bind-html="comment.text | textLinks | url"></div><div class="images"><a ng-href="image" lightbox class="image" ng-repeat="image in comment.images" style="background-image: url({{image}})"></a></div><a href="javascript:void(0);" class="showmore" ng-show="comment.fullText != '' && !comment.hideShowMore" ng-click="comment.text = comment.fullText; comment.hideShowMore = true">Show more...</a><commentreactions comment="comment"></commentreactions><div class="divider"></div></div></div>