<div id="wrapper">
	<topbar user="user"></topbar>

	<div class="wallpaper-wrapper">
		<bigratedavatar user="profile" ng-if="profile"></bigratedavatar>

		<div ng-show="user && user.role != 'User'">
			<div class="buttons narrow" ng-show="user._id != profile._id">
				<a class="ask-question"><i class="material-icons">help</i> <div class="title">Ask question</div></a>
				<a class="message"><i class="material-icons">message</i> <div class="title">Message</div></a>

				<a ng-show="!profile.isFollowing" class="follow" ng-click="follow(profile)"><i class="material-icons">person_add</i> <div class="title">Follow</div></a>
				<a ng-show="profile.isFollowing" class="follow" ng-click="unfollow(profile)"><i class="material-icons">person_outline</i> <div class="title">Unfollow</div></a>
			</div>

			<div class="buttons" ng-show="user._id == profile._id">
				<a class="questions"><i class="material-icons">help</i> <div class="title">Question box ({{user.questions.length || 0}})</div></a>
				<a ng-href="#!/editmy" class="edit-profile"><i class="material-icons">edit</i> <div class="title">Edit profile</div></a>
			</div>
		</div>

		<div class="wallpaper" ng-class="{empty: !profile.wallpaper}" style="background-image: url('{{profile.wallpaper}}')"></div>
		<div class="footer">
			<profilereactions profile="profile"></profilereactions>
		</div>
	</div>

	<div class="content">
		<div class="left">
			<div class="user-profile-info" ng-if="profile">
				<div class="info">
					<div class="name">{{profile.name}}</div>
					<div class="position">{{profile.position}}</div>
				</div>

				<div class="rating-wrapper" ng-if="profile.likes_percentage">
					<i class="material-icons like">thumb_up</i>
					<div class="rating-value">{{profile.likes_percentage}}% Likes</div>
					<i class="material-icons dislike">thumb_down</i>
				</div>

				<div class="rating-bar-wrapper" ng-if="profile.likes_percentage">
					<div class="rating-bar" style="width: {{profile.likes_percentage}}%;"></div>
				</div>
			</div>

			<div class="user-description-block" ng-if="profile && profile.intro">
				<div class="title">Intro</div>
				<div class="value">{{profile.intro}}</div>
			</div>

			<div class="user-description-block" ng-if="profile && profile.experience.length > 0">
				<div class="title">Experience</div>
				<div class="experience-block" ng-repeat="experience in profile.experience">
					<div class="value">{{experience.place}}</div>
					<div class="value">{{experience.time}}</div>
					<div class="value">{{experience.description}}</div>
				</div>
			</div>

			<div class="user-description-block" ng-if="profile && profile.certificates.length > 0">
				<div class="title">Certificates</div>
				<a href="{{cert.filepath}}" target="_blank" class="file" ng-repeat="cert in profile.certificates">{{cert.filename}}</a>
			</div>

			<div class="user-description-block" ng-if="profile && profile.contact && (profile.contact.email || profile.contact.phone || profile.contact.skype || profile.contact.linkedin || profile.contact.fb)">
				<div class="title">Contacts</div>
				<div class="address-element email" ng-if="profile.contact.email">{{profile.contact.email}}</div>
				<div class="address-element phone" ng-if="profile.contact.phone">{{profile.contact.phone}}</div>
				<div class="address-element skype" ng-if="profile.contact.skype">{{profile.contact.skype}}</div>
				<a ng-href="{{profile.contact.linkedin}}" target="_blank" class="address-element linkedin" ng-if="profile.contact.linkedin">{{profile.contact.linkedin}}</a>
				<a ng-href="{{profile.contact.fb}}" target="_blank" class="address-element fb" ng-if="profile.contact.fb">{{profile.contact.fb}}</a>
			</div>

			<div class="user-description-block" ng-if="profile && profile.downloads.length > 0">
				<div class="title">Downloads</div>
				<a href="{{file.filepath}}" target="_blank" class="file-download" ng-repeat="file in profile.downloads">{{file.filename}}</a>
			</div>

			<div class="user-description-block" ng-if="profile && profile.photos">
				<div class="title">Photos</div>
				<div class="photos">
					<div class="photo" ng-class="{empty: photo.url === ''}" style="background-image: url('{{photo.url}}');" ng-repeat="photo in profile.randomPhotos"></div>
					<div class="other-photos" ng-if="profile.photos.length > 8">+{{profile.photos.length - 8}}</div>
				</div>
			</div>
		</div>
		<div class="middle">
			<onyourmind ng-if="user && user._id == profile._id" user="user"></onyourmind>
			<feed user="profile" ng-if="profile"></feed>
		</div>
		<div class="right">
			<newquestions user="profile" ng-if="profile"></newquestions>
			<familiarexperts></familiarexperts>
			<aboutbox></aboutbox>
		</div>
	</div>
</div>