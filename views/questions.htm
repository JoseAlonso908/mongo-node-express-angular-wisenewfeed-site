<div id="wrapper">
	<div id="top-bar-background">
		<topbar user="user"></topbar>
	</div>

	<div id="wallpaper-block-wrapper">
		<wallpaperblock user="user" profile="profile" type="type"></wallpaperblock>
	</div>

	<div class="content">
		<div class="left">
			<profileinfo ng-if="profile" profile="profile"></profileinfo>
		</div>
		<div class="middle">
			<div class="questions">
				<div class="title-wrapper">
					<div class="title">{{questions.length}} questions</div>
					<div class="types">
						<span class="type replied">{{types.replied}} replied</span>
						<span class="type cancelled">{{types.cancelled}} cancelled</span>
						<span class="type active">{{types.active}} active</span>
					</div>
				</div>

				<div class="list">
					<div class="question" ng-class="{active: question._id == replyingTo._id}" ng-repeat="question in questions">
						<a name="q{{question._id}}"></a>

						<div class="title">
							<div class="name">{{::question.author.name}}</div>
							<div class="date">{{::question.createdAt}}</div>
						</div>

						<div class="text">{{::question.text}}</div>
						<div class="response" ng-show="question.type == 'replied' && question.response">{{::question.response}}</div>

						<div class="footer">
							<a href="javascript:void(0);" ng-disabled="question.liked" ng-click="(question.liked) ? void(0) : like(question)" class="likes"><i class="material-icons">thumb_up</i> <span>{{question.likes || 0}}</span></a>

							<div class="actions">
								<a class="item" ng-click="cancel(question)" ng-show="question.recipient == user._id && question.type == 'active'" href="javascript:void(0);"><i class="material-icons">remove_circle</i> <span>Cancel</span></a>
								<a class="item" ng-click="setReplyMode(question)" ng-show="question.recipient == user._id && question.type == 'active'" href="javascript:void(0);"><i class="material-icons">reply</i> <span>Reply</span></a>

								<span class="item replied" ng-show="question.type == 'replied'"><i class="material-icons">check_circle</i> <span>Replied</span></span>
								<span class="item cancelled" ng-show="question.type == 'cancelled'"><i class="material-icons">remove_circle</i> <span>Cancelled</span></span>
							</div>
						</div>
					</div>
					<div class="text" ng-show="questions.length === 0">Questionbox is empty</div>

					<div class="question-box-wrapper" ng-if="user" ng-hide="user._id == profile._id && !replyMode">
						<div class="question-box">
							<avatar user="user"></avatar>
							<textarea placeholder="{{(replyMode) ? 'Write a reply...' : 'Ask a question...'}}" ng-class="{'not-empty': question.text}" ng-model="question.text"></textarea>

							<button ng-disabled="loading" ng-click="(replyMode) ? $parent.reply(question.text) : $parent.askQuestion()" class="send">
								<div>
									<i class="material-icons">send</i>
									<div class="title">Send</div>
								</div>
							</button>

							<form><input type="file" name="file" accept="image/*" class="hidden-file-input"></form>
							<button ng-if="files.length < 5" ng-click="addImage()" class="upload-image"><i class="material-icons">camera_alt</i></button>

							<div class="clear"></div>
							<div class="upload-files" ng-show="files.length > 0">
								<div class="file" ng-repeat="file in files" style="background-image: url({{file.base64}})">
									<a href="javascript:void(0);" class="remove" ng-click="removeUpload($index)"><i class="material-icons">close</i></a>
								</div>
								<div class="clear"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="right">
			<newquestions user="profile" ng-if="profile"></newquestions>
			<familiarexperts></familiarexperts>
			<aboutbox></aboutbox>
		</div>
	</div>
</div>